apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Change namespace, labels, and name to dev
commonLabels:
  environment: dev
namespace: dev
namePrefix: dev-

#Change the tag on the images
images:
  - name: ghcr.io/biosimulations/account-api
    newTag: c5cba26b5332c309bdb34455f08805df1f0ffb47
  - name: ghcr.io/biosimulations/combine-service
    newTag: c5cba26b5332c309bdb34455f08805df1f0ffb47
  - name: ghcr.io/biosimulations/dispatch-api
    newTag: c5cba26b5332c309bdb34455f08805df1f0ffb47
  - name: ghcr.io/biosimulations/dispatch-service
    newTag: c5cba26b5332c309bdb34455f08805df1f0ffb47
  - name: ghcr.io/biosimulations/mail-service
    newTag: c5cba26b5332c309bdb34455f08805df1f0ffb47
  - name: ghcr.io/biosimulations/ontology-api
    newTag: c5cba26b5332c309bdb34455f08805df1f0ffb47
  - name: ghcr.io/biosimulations/platform-api
    newTag: c5cba26b5332c309bdb34455f08805df1f0ffb47
  - name: ghcr.io/biosimulations/simulators-api
    newTag: c5cba26b5332c309bdb34455f08805df1f0ffb47

#scale down dev deployment
replicas:
  - name: dev-account-api
    count: 1
  - name: dev-dispatch-api
    count: 2
  - name: dev-dispatch-service
    count: 2
  - name: dev-hsds
    count: 2
  - name: dev-mail-service
    count: 1
  - name: dev-ontology-api
    count: 1
  - name: dev-platform-api
    count: 1
  - name: dev-run-api
    count: 1
  - name: dev-simulators-api
    count: 1

#Use the development version of the secrets and ingress
resources:
  - dev.yml
  - biosimulations-ingress.yml
  - biosimulators-ingress.yml
  - ../../secrets/dev
  - ../../config/dev
  - ../../base
